<Page x:Class="Wp.WpfDemo.UIL.Views.Pages.HomePage"
	  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
	  xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
	  xmlns:hc="https://handyorg.github.io/handycontrol"
	  xmlns:vm="clr-namespace:Wp.WpfDemo.UIL.ViewModels.Pages"
	  xmlns:local="clr-namespace:Wp.WpfDemo.UIL.Views.Pages"
	  mc:Ignorable="d"
	  d:DesignHeight="966"
	  d:DesignWidth="1641"
	  Style="{DynamicResource  MianWindowPageStyle}"
	  Title="HomePage">
	<Page.DataContext>
		<vm:HomePageVM />
	</Page.DataContext>
	<Page.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/Styles/GeometryStyles/LettersAndNumbers.xaml" />
				<ResourceDictionary Source="/Styles/SolidColorBrushStyles.xaml" />
				<ResourceDictionary Source="/Styles/ColorStyles.xaml" />
				<ResourceDictionary Source="/Styles/PageStyles.xaml" />
				<ResourceDictionary Source="/Styles/TextBlockStyles.xaml" />
				<ResourceDictionary Source="/Styles/BorderStyles.xaml" />
				<ResourceDictionary Source="/Styles/ScrollBarStyles.xaml" />
				<ResourceDictionary Source="/Styles/StepBarItemStyles.xaml" />
				<ResourceDictionary Source="/Styles/StepBarStyles.xaml" />
			</ResourceDictionary.MergedDictionaries>
			<SolidColorBrush x:Key="PrimarySolidColorBrushStyle"
							 Color="{StaticResource Green500ColorStyle}" />
			<SolidColorBrush x:Key="AssistSolidColorBrushStyle"
							 Color="{StaticResource Grey600ColorStyle}" />
			<Style x:Key="ImageStyle"
				   TargetType="Image">
				<Setter Property="Width"
						Value="1000" />
				<Setter Property="Height"
						Value="600" />
				<Setter Property="Stretch"
						Value="UniformToFill" />
			</Style>
			<DataTemplate x:Key="StepBarItemTemplate">
				<StackPanel VerticalAlignment="Center"
							HorizontalAlignment="Center"
							DataContext="{Binding}">
					<TextBlock FontSize="16"
							   FontWeight="Bold"
							   HorizontalAlignment="Left">
														<Run Text="Step" />
														<Run Text="{Binding Index,RelativeSource={RelativeSource AncestorType=hc:StepBarItem}}" />
										<Run Text="{Binding }" /></TextBlock>
					<TextBlock Margin="0,4,0,0"
							   TextWrapping="Wrap"
							   Text="步骤描述" />
					<hc:Divider  Content="产品信息"
								 Foreground="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type hc:StepBarItem}},Path=Foreground}"
								 Margin="0"
								 LineStrokeThickness="1"
								 Width="200" />
					<TextBlock Margin="0,4,0,0"
							   TextWrapping="Wrap"
							   Text="2" />
				</StackPanel>
			</DataTemplate>
		</ResourceDictionary>
	</Page.Resources>
	<Grid>
		<Border Style="{StaticResource PageBorderStyle}">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="*" />
					<RowDefinition Height="*" />
					<RowDefinition Height="*" />
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>
				<materialDesign:Card Grid.Row="0"
									 Grid.Column="0"
									 Margin="10">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*" />
							<ColumnDefinition Width="auto" />
							<ColumnDefinition Width="40" />
						</Grid.ColumnDefinitions>
						<Grid.RowDefinitions>
							<RowDefinition Height="*" />
							<RowDefinition Height="auto" />
							<RowDefinition Height="20" />
							<RowDefinition Height="auto" />
							<RowDefinition Height="40" />
						</Grid.RowDefinitions>
						<ScrollViewer Grid.Row="0"
									  Grid.Column="0"
									  Grid.RowSpan="5"
									  Grid.ColumnSpan="3"
									  Name="ResultScrollView"
									  Padding="10"
									  HorizontalScrollBarVisibility="Disabled"
									  VerticalScrollBarVisibility="Auto"
									  Style="{StaticResource ThickScrollViewer}">
							<ItemsControl x:Name="ResultItemsControl"
										  ItemsSource="{Binding SteperItemInfo}">
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<StackPanel Orientation="Vertical">
											<Expander Name="TestExpander"
													  DataContext="{Binding}"
													  IsExpanded="{Binding IsExpand,Mode=TwoWay}">
												<Expander.Header>
													<Grid>
														<Grid.ColumnDefinitions>
															<ColumnDefinition Width="20" />
															<ColumnDefinition Width="auto" />
															<ColumnDefinition Width="10" />
															<ColumnDefinition Width="*" />
														</Grid.ColumnDefinitions>
														<!--<TextBlock Grid.Column="1"
																   Style="{Binding Status,Converter={StaticResource assemblyStatusTextBlockConverter}}"
																   ToolTip="{Binding Status ,Converter={StaticResource assemblyStatusToolTipConverter}}" />-->
														<TextBlock Grid.Column="3"
																   Text="{Binding RFID}"
																   Style="{StaticResource PrimaryTextBlockStyle}"
																   HorizontalAlignment="Stretch"
																   TextAlignment="Left" />
													</Grid>
												</Expander.Header>
												<Grid>
													<Grid.RowDefinitions>
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
													</Grid.RowDefinitions>
													<hc:StepBar Grid.Row="0"
																x:Name="assemblingSteper"
																Style="{DynamicResource StepBarStyle}"
																ItemsSource="{Binding SteperItemInfo}">
														<hc:StepBar.ItemTemplate>
															<DataTemplate>
																<StackPanel VerticalAlignment="Center"
																			HorizontalAlignment="Center">
																	<TextBlock FontSize="16"
																			   FontWeight="Bold"
																			   HorizontalAlignment="Left">
														<Run Text="Step" />
														<Run Text="{Binding Index,RelativeSource={RelativeSource AncestorType=hc:StepBarItem}}" />
														<Run Text="{Binding FirstLevelTitle}" /></TextBlock>
																	<TextBlock Margin="0,4,0,0"
																			   Height="auto"
																			   TextWrapping="Wrap"
																			   Text="{Binding SecondLevelTitle}" />
																	<hc:Divider  Content="{Binding DividerContext}"
																				 Foreground="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type hc:StepBarItem}},Path=Foreground}"
																				 Margin="0"
																				 LineStrokeThickness="1"
																				 Width="200" />
																	<ItemsControl ItemsSource="{Binding Details}">
																		<ItemsControl.ItemTemplate>
																			<DataTemplate>
																				<TextBlock Text="{Binding}" />
																			</DataTemplate>
																		</ItemsControl.ItemTemplate>
																	</ItemsControl>
																</StackPanel>
															</DataTemplate>
														</hc:StepBar.ItemTemplate>
													</hc:StepBar>
													<Grid Grid.Row="1">
														<Grid.ColumnDefinitions>
															<ColumnDefinition Width="*" />
															<ColumnDefinition Width="60" />
														</Grid.ColumnDefinitions>
														<TextBlock Grid.Column="0"
																   HorizontalAlignment="Right"
																   Margin="0,20"
																   ToolTip="下一步"
																   Text="下一步"
																   FontSize="20">
															<!--<TextBlock.Style>
																<Style TargetType="TextBlock"
																	   BasedOn="{StaticResource Forward1TextBlockStyle}">
																	<Style.Triggers>
																		<Trigger Property="IsMouseOver"
																				 Value="True">
																			<Setter Property="FontSize"
																					Value="42" />
																			<Setter Property="Foreground"
																					Value="{DynamicResource Primary500SolidColorBrushStyle}" />
																		</Trigger>
																		<Trigger Property="IsMouseOver"
																				 Value="False">
																			<Setter Property="FontSize"
																					Value="40" />
																			<Setter Property="Foreground"
																					Value="{DynamicResource Assist500SolidColorBrushStyle}" />
																		</Trigger>
																	</Style.Triggers>
																</Style>
															</TextBlock.Style>-->
													<i:Interaction.Triggers>
														<i:EventTrigger EventName="MouseLeftButtonUp">
																<i:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=Page},Path=DataContext.NextStepCmd}"
																					   CommandParameter="{Binding ElementName=assemblingSteper}" />
														</i:EventTrigger>
													</i:Interaction.Triggers></TextBlock>
													</Grid>
												</Grid>
											</Expander>
											<Border Background="{StaticResource  Primary500SolidColorBrushStyle}"
													Height="1"
													HorizontalAlignment="Stretch"
													SnapsToDevicePixels="True" />
										</StackPanel>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</ScrollViewer>
						<Button  Grid.Row="1"
								 Grid.Column="1"
								 x:Name="Folder"
								 Command="{Binding FoldExpanderCmd}"
								 ToolTip="折叠所有项目">
							<!--<TextBlock Style="{StaticResource FoldTextBlockStyle}"
									   Foreground="White" />-->
						</Button>
						<Button Grid.Row="2"
								Grid.Column="1"
								Command="{Binding StepperTestCmd}"></Button>
						<!--<Button Grid.Row="3"
								Grid.Column="1"
								Command="{Binding ScrollViewToTopCmd}"
								CommandParameter="{Binding ElementName=ResultScrollView}"
								ToolTip="返回顶部">
							-->
						<!--Visibility="{Binding ElementName=ResultScrollView ,Path=VerticalOffset ,Converter={StaticResource toTopperVisibilityConverter}}"-->
						<!--<TextBlock Style="{StaticResource ToTopTextBlockStyle}"
									   Foreground="White" />-->
						<!--
						</Button>-->
					</Grid>
				</materialDesign:Card>
			</Grid>
		</Border>
	</Grid>
</Page>